<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="description" content="Captive portal for RevoSwitch-%SERIAL%">
        <meta name="keywords" content="RevoSwitch">
        <meta name="author" content="Harsha Alva">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
        <title>RevoSwitch-%SERIAL%</title>
        <link rel="stylesheet" href="style.css?%FW%">
        <script type="text/javascript" src="jquery-3.2.1.min.js?%FW%"></script>
    </head>

    <body>
        <div class="wrapper">
            <div id="modal" class="modal">
                <div class="modal-content">
                    <div class="modal-body">
                        <p id="modalText"></p>
                    </div>
                </div>
            </div>

            <div class="header">
                <a href="javascript:void(0);" class="icon" id="toggle">&#9776;</a>
                <span class="title no-select">RevoSwitch-%SERIAL%</span>
                <a class="cloud no-select" href="%ULINK%" target="_blank" title="RevoSwitch-%SERIAL% web interface link" style="display: %S_ULINK%;">&#9729;</a> 
            </div> 
            
            <div class="content">
                <div class="nav no-select" id="nav">
                    <a data-src="home" href="#">Home</a>
                    
                    <a class="group">Configuration</a>
                    <a data-src="wifiap" href="#">WiFi AP</a>
                    <a data-src="wifista" href="#">WiFi Client</a>
                    <a data-src="switch" href="#">Switch</a>
                    <a data-src="mqtt" href="#">MQTT</a>
                    
                    <a class="group">Device</a>
                    <a data-src="reset" href="#">Reset</a>
                    <a data-src="reboot" href="#">Reboot</a>
                    <a data-src="about" href="#">About</a>
                </div> 
                
                 
                <div class="page-holder" id="pageHolder">
                    <div id="page"></div>
                </div>
            </div> 
            
            <div class="footer">
                <span class="title no-select"><a href="https://alvaharsha.com" target="_blank">Harsha Alva</a></span>
            </div>
            
            <script type="text/javascript" src="script.js?%FW%"></script>
        </div>
        
        <div class="restart-modal" id="rebootModal">
            <div class="progress">
                <p>Restarting in <span id="time">30</span>s...</p>
                <div class="progress-track">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
            </div>
            
            <script>
                var time = 30;
                var percent = 0;
                var bar = $("#progressBar");
                var timerid = -1;
                
                function incrementPercent() {
                    if (percent >= 100) {
                        clearInterval(timerId);
                        window.location.href = '/';
                    } else {
                        percent++;
                        $("#time").text(time - Math.round(time/100 * percent));
                        bar.css("width", percent + '%');
                    }
                }

                function showRebootWait() {
                    $.each(tmr, function(i,v) { window.clearTimeout(v); });
                    tmr = [];
                    $("#rebootModal").css("display", "flex");
                    bar.css("width", '0');
                    timerId = setInterval(incrementPercent, time * 10); // time * 1000 / 100;
                }
                
                //setTimeout(showRebootWait, 5000);
            </script>
        </div>
    </body>
</html>